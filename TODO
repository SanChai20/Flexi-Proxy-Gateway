1. key.pemæ–‡ä»¶æ·»åŠ æƒé™å¹¶ä¸”ä¸èƒ½æ”¾åˆ°å½“å‰å·¥ç¨‹ç›®å½•é‡Œ
3. ã€å¯é€‰ã€‘Ratelimit





å½“éœ€è¦å°† Fernet ç”Ÿæˆçš„å­—èŠ‚å¯†é’¥ï¼ˆb'...' æ ¼å¼ï¼‰å­˜å‚¨åˆ°ç¯å¢ƒå˜é‡æ—¶ï¼Œå¿…é¡»é€šè¿‡å®‰å…¨çš„ç¼–ç /è§£ç æµç¨‹è½¬æ¢ã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ–¹æ³•ï¼Œç»“åˆåŠ å¯†æœ€ä½³å®è·µï¼š

ğŸ”‘ æ­£ç¡®è½¬æ¢å¯†é’¥çš„æ­¥éª¤
Fernet å¯†é’¥æ˜¯ 32 å­—èŠ‚çš„ URL-safe Base64 ç¼–ç å­—ç¬¦ä¸²ï¼Œéœ€æŒ‰ä»¥ä¸‹æ–¹å¼è½¬æ¢ï¼š

1. ç”Ÿæˆå¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå­˜å‚¨åˆ°ç¯å¢ƒå˜é‡ï¼‰

from cryptography.fernet import Fernet
import os

# ç”ŸæˆåŸå§‹å­—èŠ‚å¯†é’¥
key_bytes = Fernet.generate_key()  # è¾“å‡º: b'Xy...ZQ=='

# å®‰å…¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆä½¿ç”¨ ASCII è§£ç ï¼‰
key_str = key_bytes.decode("ascii")  # ç§»é™¤ b' å‰ç¼€ï¼Œå¾—åˆ°çº¯å­—ç¬¦ä¸²

# å°† key_str å­˜å…¥ç¯å¢ƒå˜é‡ï¼ˆå®é™…éƒ¨ç½²æ—¶é€šè¿‡å®‰å…¨æ¸ é“è®¾ç½®ï¼‰
# ä¾‹å¦‚: export SECRET_KEY="Xy...ZQ=="
2. ä»ç¯å¢ƒå˜é‡æ¢å¤å¯†é’¥ï¼ˆè¿è¡Œæ—¶ä½¿ç”¨ï¼‰

# ä»ç¯å¢ƒå˜é‡å®‰å…¨è·å–å­—ç¬¦ä¸²
key_str = os.environ["SECRET_KEY"]

# ä¸¥æ ¼è½¬å›å­—èŠ‚ï¼ˆå¿…é¡»ä½¿ç”¨ ASCII ç¼–ç ï¼‰
key_bytes = key_str.encode("ascii")

# åˆå§‹åŒ–åŠ å¯†å™¨
cipher = Fernet(key_bytes)
âš ï¸ ä¸ºä»€ä¹ˆå¿…é¡»è¿™æ ·æ“ä½œï¼Ÿ
Base64 å®‰å…¨æ€§ï¼šFernet å¯†é’¥æœ¬è´¨æ˜¯ URL-safe Base64 å­—ç¬¦ä¸²ï¼ŒASCII ç¼–ç å¯å®Œç¾è¿˜åŸåŸå§‹å­—èŠ‚ï¼ˆcryptography.ioï¼‰ã€‚
é¿å…ç¼–ç é™·é˜±ï¼šè‹¥é”™è¯¯ä½¿ç”¨ utf-8 è§£ç ï¼Œå¯èƒ½å¯¼è‡´å¯†é’¥æŸåã€‚å¿…é¡»ç”¨ asciiï¼ˆmedium.com çš„ç¤ºä¾‹ä¸­å¯†é’¥ç›´æ¥ä»¥ ASCII å­—ç¬¦ä¸²å½¢å¼ä½¿ç”¨ï¼‰ã€‚
ç¡¬ç¼–ç é£é™©ï¼šåˆ‡å‹¿åœ¨ä»£ç ä¸­å†™æ­»å¯†é’¥ï¼ˆå¦‚ key = b"Xy...ZQ=="ï¼‰ï¼Œè¿™ä¼šç ´åå®‰å…¨é“¾ï¼ˆmedium.com å¼ºè°ƒå¯†é’¥åº”ä»å®‰å…¨ä½ç½®åŠ¨æ€è·å–ï¼‰ã€‚
ğŸ“Œ å®Œæ•´å®è·µç¤ºä¾‹

import os
from cryptography.fernet import Fernet

# --- å­˜å‚¨å¯†é’¥åˆ°ç¯å¢ƒå˜é‡æ—¶ï¼ˆä»…éœ€æ‰§è¡Œä¸€æ¬¡ï¼‰ ---
# key_bytes = Fernet.generate_key()
# print("Set this in your env:", key_bytes.decode("ascii"))

# --- è¿è¡Œæ—¶åŠ è½½å¯†é’¥ ---
key_str = os.environ["SECRET_KEY"]  # ä»ç¯å¢ƒå˜é‡è·å–å­—ç¬¦ä¸²
cipher = Fernet(key_str.encode("ascii"))  # ä¸¥æ ¼è½¬å›å­—èŠ‚

# åŠ å¯†ç¤ºä¾‹
encrypted = cipher.encrypt(b"my_sensitive_data")
print("Encrypted:", encrypted.decode("ascii"))

# è§£å¯†ç¤ºä¾‹
decrypted = cipher.decrypt(encrypted)
print("Decrypted:", decrypted.decode("utf-8"))